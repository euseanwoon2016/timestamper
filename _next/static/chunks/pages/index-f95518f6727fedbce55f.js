(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{82:function(e,t,r){"use strict";r.r(t),r.d(t,{TimestamperActionKind:function(){return W},TimestamperContext:function(){return q},default:function(){return Q},timestampIsEqual:function(){return X}});var n=r(3789),i=r(2809),s=r(7294),a=r(318),o=r(862),c=r(3924),l=r(2827),p=r(980),m=r(9050),u=r(3850),d=r(8017),f=r(9444),x=r(8482),E=r(336),y=r(9887),h=r(8906),T=r(8448),S=r(4115),j=r(6627),g=r(9008),_=r(5893),v=function(e){var t=e.title,r=e.description,n=e.url,i=e.img;return(0,_.jsxs)(g.default,{children:[(0,_.jsx)("title",{children:t}),(0,_.jsx)("meta",{name:"title",content:t}),(0,_.jsx)("meta",{name:"description",content:r}),(0,_.jsx)("meta",{property:"og:type",content:"website"}),(0,_.jsx)("meta",{property:"og:url",content:null!==n&&void 0!==n?n:""}),(0,_.jsx)("meta",{property:"og:title",content:t}),(0,_.jsx)("meta",{property:"og:description",content:r}),(0,_.jsx)("meta",{property:"og:image",content:null!==i&&void 0!==i?i:""}),(0,_.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,_.jsx)("meta",{property:"twitter:url",content:null!==n&&void 0!==n?n:""}),(0,_.jsx)("meta",{property:"twitter:title",content:t}),(0,_.jsx)("meta",{property:"twitter:description",content:r}),(0,_.jsx)("meta",{property:"twitter:image",content:null!==i&&void 0!==i?i:""}),(0,_.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,_.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,_.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,_.jsx)("link",{rel:"manifest",href:"/site.webmanifest"})]})},I=r(6755),O=r(9950),b=r(8420),P=function(){var e=(0,p.useColorMode)(),t=e.colorMode,r=e.toggleColorMode;return(0,_.jsx)(b.h,{borderRadius:"md","aria-label":t,onClick:r,icon:"light"===t?(0,_.jsx)(I.k,{}):(0,_.jsx)(O.N,{})})},M=r(9327),A=r(3733),w=r(2770),R=r(17),D=function(e){var t=e.isOpen,r=e.onClose,i=(0,p.useToast)(),a=(0,s.useContext)(q),o=a.state,c=(a.dispatch,function(){if(null!==o.timestampList)return(0,n.Z)(o.timestampList).sort((function(e,t){return e.timestamp.actualSeconds-t.timestamp.actualSeconds})).map((function(e){var t=e.timestamp,r=t.hours,n=t.minutes,i=t.seconds,s=e.event;return"".concat("00"!=r?"".concat(r,":"):"").concat(n,":").concat(i," ").concat(s)})).join("\n")});return(0,_.jsxs)(w.u_,{isOpen:t,onClose:r,children:[(0,_.jsx)(w.ZA,{}),(0,_.jsxs)(w.hz,{children:[(0,_.jsx)(w.xB,{children:"Export As Text"}),(0,_.jsx)(w.ol,{}),(0,_.jsx)(w.fe,{children:(0,_.jsx)(R.g,{whiteSpace:"pre-wrap",height:"400px",children:c()})}),(0,_.jsxs)(w.mz,{children:[(0,_.jsx)(h.z,{variant:"ghost",mr:3,leftIcon:(0,_.jsx)(A.T,{}),onClick:function(){navigator.clipboard.writeText(c()),i({title:"Copied to clipboard!",description:"You can paste it directly into the YouTube chat.",status:"success",duration:3e3,isClosable:!0})},children:"Copy"}),(0,_.jsx)(h.z,{colorScheme:"red",onClick:r,children:"Close"})]})]})]})},L=r(3454),C=r(5499);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=function(e){var t=e.isOpen,r=e.onClose,n=(0,C.Z)(["timestamps","videoId","timestamperSettings"]),o=(0,a.Z)(n,3),c=(o[0],o[1]),l=o[2],p=(0,s.useContext)(q),m=p.state,u=p.dispatch;return(0,_.jsxs)(w.u_,{isOpen:t,onClose:r,children:[(0,_.jsx)(w.ZA,{}),(0,_.jsxs)(w.hz,{children:[(0,_.jsx)(w.xB,{children:"Settings"}),(0,_.jsx)(w.ol,{}),(0,_.jsx)(w.fe,{children:(0,_.jsxs)(d.xu,{display:"flex",sx:{gap:"0.5rem"},flexDir:"column",children:[(0,_.jsxs)("label",{children:[(0,_.jsx)(S.x,{children:(0,_.jsx)(L.u,{hasArrow:!0,label:"Number of seconds before the current time when creating timestamp.",children:"Time offset (seconds):"})}),(0,_.jsx)(y.I,{type:"number",onChange:function(e){var t=e.currentTarget,r=t.name,n=t.value,s=N(N({},m.timestamperSettings),{},(0,i.Z)({},r,n));c("timestamperSettings",s),u({type:W.SET_TIMESTAMPER_SETTINGS,payload:s})},name:"timeOffset",value:m.timestamperSettings.timeOffset})]}),(0,_.jsx)(L.u,{hasArrow:!0,label:"Clear all site data such as current video ID, saved timestamps and settings.",children:(0,_.jsx)(h.z,{onClick:function(){l("timestamperSettings"),l("timestamps"),l("videoId"),window.location.reload()},colorScheme:"red",children:"Clear All Data"})})]})}),(0,_.jsx)(w.mz,{children:(0,_.jsx)(h.z,{onClick:r,children:"Save"})})]})]})},V=r(3527),z=r.n(V);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var U=function(e){var t=e.timestampEvent,r=(0,s.useContext)(q),n=r.state,a=r.dispatch,o=(0,s.useRef)(null),c=(0,s.useRef)(null),p=(0,s.useRef)(null),m=(0,s.useRef)(null),u=function(){a({type:W.REMOVE_TIMESTAMP,payload:t})},f=function(e,r){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.timestamp);n[r]=parseInt(e.currentTarget.value,10).toString(),X(t.timestamp,n)||a({type:W.UPDATE_TIMESTAMP_TIME,payload:{timestampEvent:t,newTimestamp:n}})};return(0,s.useEffect)((function(){"INPUT"!==document.activeElement.tagName&&o.current.focus()}),[n.timestampList]),(0,s.useEffect)((function(){c.current.value=t.timestamp.hours.toString().padStart(2,"0"),p.current.value=t.timestamp.minutes.toString().padStart(2,"0"),m.current.value=t.timestamp.seconds.toString().padStart(2,"0")}),[t]),(0,_.jsxs)(d.xu,{className:z().timestampEvent,display:"flex",children:[(0,_.jsx)(b.h,{variant:"ghost",marginRight:"0.5rem","aria-label":"Jump to this timestamp",icon:(0,_.jsx)(M.oqk,{size:"2rem"}),borderRadius:"5px",colorScheme:"blue",onClick:function(){n.player.seekTo(t.timestamp.actualSeconds)}}),(0,_.jsxs)(d.xu,{flex:"0 1 32%",display:"flex",className:z().timestamp,children:[(0,_.jsx)(y.I,{ref:c,min:"0",max:"59",type:"number",onBlur:function(e){f(e,"hours")}}),(0,_.jsx)(y.I,{ref:p,min:"0",max:"59",type:"number",onBlur:function(e){f(e,"minutes")}}),(0,_.jsx)(y.I,{ref:m,min:"0",max:"59",type:"number",onBlur:function(e){f(e,"seconds")}})]}),(0,_.jsx)(d.xu,{fontSize:"24",style:{paddingInline:"0.5rem"},children:":"}),(0,_.jsx)(d.xu,{flex:"0 1 68%",children:(0,_.jsx)(y.I,{ref:o,type:"text",placeholder:"Something cool happened...",onInput:function(e){a({type:W.UPDATE_TIMESTAMP_EVENT,payload:{timestampEvent:t,newValue:e.currentTarget.value}})},value:t.event,onKeyDown:function(e){"Escape"===e.key&&u()}})}),(0,_.jsx)(b.h,{variant:"ghost",marginLeft:"0.5rem","aria-label":"Delete this timestamp",icon:(0,_.jsx)(l.p,{}),borderRadius:"5px",colorScheme:"red",onClick:u})]})},H=function(){var e=(0,s.useContext)(q),t=e.state,r=e.dispatch,n=(0,p.useColorMode)().colorMode,i=(0,m.q)(),g=i.isOpen,I=i.onOpen,O=i.onClose,b=(0,m.q)(),A=b.isOpen,w=b.onOpen,R=b.onClose,L=(0,s.useRef)(null),k=(0,s.useRef)(null),N=(0,C.Z)(["timestamps","videoId","timestamperSettings"]),V=(0,a.Z)(N,3),Z=V[0],H=V[1],B=V[2];(0,s.useEffect)((function(){if(null===t.player){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),window.onYouTubeIframeAPIReady=function(){r({type:W.SET_PLAYER,payload:new window.YT.Player("player",{height:"100%",width:"100%",playerVars:{playsinline:1},events:{onReady:function(e){r({type:W.SET_PLAYER_READY,payload:!0})}}})})}}null===t.timestampList&&G()}),[]),(0,s.useEffect)((function(){if(null!==t.timestampList)if(0!==t.timestampList.length){var e=JSON.stringify(t.timestampList);H("timestamps",e,{path:"/",expires:new Date(Date.now()+7776e6),sameSite:"strict",secure:!0})}else B("timestamps")}),[t.timestampList]),(0,s.useEffect)((function(){t.isPlayerReady&&null!==t.videoId&&t.player.loadVideoById(t.videoId);var e=function(e){"Enter"===e.key&&r({type:W.ADD_TIMESTAMP,payload:""})};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t.isPlayerReady,t.videoId]);var G=function(){Z.timestamps?r({type:W.SET_TIMESTAMP_LIST,payload:Z.timestamps}):r({type:W.SET_TIMESTAMP_LIST,payload:[]}),Z.videoId&&(L.current.value="https://www.youtube.com/watch?v=".concat(Z.videoId),r({type:W.SET_VIDEO_ID,payload:Z.videoId})),Z.timestamperSettings&&r({type:W.SET_TIMESTAMPER_SETTINGS,payload:Z.timestamperSettings})};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v,{title:"Timestamper",description:"Timestamp manager for YouTube.",img:"/android-chrome-192x192.png"}),(0,_.jsxs)(u.W,{maxW:"100%",children:[(0,_.jsxs)(d.xu,{display:"flex",margin:"0 auto",maxW:"container.lg",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsxs)(f.r,{href:"/",paddingY:"0.5rem",alignItems:"center",style:{textDecoration:"none"},display:"flex",children:[(0,_.jsx)(x.E,{boxSize:"100px",src:"images/timestamp.png",alt:"Timestamp Logo"}),(0,_.jsx)(E.X,{children:"Timestamper"})]}),(0,_.jsx)(P,{})]}),(0,_.jsxs)(d.xu,{display:"flex",sx:{gap:"0.5rem"},children:[(0,_.jsx)(y.I,{placeholder:"https://www.youtube.com/watch?v=12345",ref:L}),(0,_.jsx)(h.z,{onClick:function(){try{var e=new URL(L.current.value),t=new URLSearchParams(e.search).get("v");t?(H("videoId",t,{path:"/",expires:new Date(Date.now()+7776e6),sameSite:"strict",secure:!0}),r({type:W.SET_VIDEO_ID,payload:t})):r({type:W.SET_VIDEO_HAS_ERRORS,payload:!0})}catch(n){r({type:W.SET_VIDEO_HAS_ERRORS,payload:!0})}},colorScheme:"blue",children:"Update"}),(0,_.jsx)(h.z,{onClick:function(){B("videoId"),r({type:W.SET_VIDEO_ID,payload:null}),r({type:W.SET_VIDEO_HAS_ERRORS,payload:!1}),L.current.value="",t.player.loadVideoById({videoId:null})},colorScheme:"red",children:"Clear"})]}),function(){if(t.videoHasErrors)return(0,_.jsx)(d.xu,{color:"red.600",children:"You provided an invalid link!"})}(),(0,_.jsxs)(d.xu,{display:"grid",gridTemplateColumns:["1fr","1fr","1fr","1fr 1fr"],gridGap:"1rem",marginY:"1rem",children:[(0,_.jsxs)(d.xu,{position:"relative",children:[(0,_.jsx)(d.xu,{className:z().player,id:"player"}),function(){if(null==t.videoId)return(0,_.jsx)(d.xu,{className:z().playerOverlay,children:(0,_.jsx)(T.M,{width:"100%",height:"100%",children:(0,_.jsx)(E.X,{size:"lg",color:"grey",fontFamily:"Roboto",fontWeight:"extrabold",textTransform:"uppercase",userSelect:"none",children:"No video link provided"})})})}()]}),(0,_.jsxs)(d.xu,{children:[(0,_.jsx)(d.xu,{borderRadius:"0.5rem",border:"1px solid ".concat("dark"==n?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),ref:k,overflowY:"auto",height:"70vh",display:"flex",flexDir:"column",sx:{gap:"0.5rem"},padding:"0.5rem",children:null===t.timestampList||0===t.timestampList.length?(0,_.jsxs)(T.M,{height:"100%",fontFamily:"Roboto",color:"grey",userSelect:"none",flexDir:"column",children:[(0,_.jsx)(E.X,{size:"lg",fontFamily:"Roboto",fontWeight:"extrabold",textTransform:"uppercase",children:"No timestamps yet!"}),(0,_.jsxs)(S.x,{children:["Hint: You can press ",(0,_.jsx)(j.T,{children:"enter"})," to create new timestamp!"]})]}):t.timestampList.map((function(e,t){return(0,_.jsx)(U,{timestampEvent:e},t)}))}),(0,_.jsxs)(d.xu,{display:"flex",sx:{gap:"0.5rem"},children:[(0,_.jsx)(h.z,{marginY:"0.5rem",leftIcon:(0,_.jsx)(o.d,{}),colorScheme:"green",onClick:function(){r({type:W.ADD_TIMESTAMP,payload:""})},children:"Add"}),(0,_.jsx)(h.z,{marginY:"0.5rem",leftIcon:(0,_.jsx)(M.cZL,{size:"1.5rem"}),colorScheme:"blue",onClick:I,children:"Export As Text"}),(0,_.jsx)(h.z,{marginY:"0.5rem",leftIcon:(0,_.jsx)(c.e,{}),onClick:w,children:"Settings"}),(0,_.jsx)(h.z,{marginY:"0.5rem",leftIcon:(0,_.jsx)(l.p,{}),colorScheme:"red",onClick:function(){r({type:W.CLEAR_TIMESTAMPS,payload:null})},children:"Clear"}),(0,_.jsx)("iframe",{src:"/external/kofi.html",style:{border:"none",marginBlock:"0.5rem",height:"40px"}})]})]})]})]}),(0,_.jsx)(D,{isOpen:g,onClose:O}),(0,_.jsx)(Y,{isOpen:A,onClose:R})]})},B=function(e){if(e<=0)return{actualSeconds:0,hours:"00",minutes:"00",seconds:"00"};var t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%60);return{actualSeconds:e,hours:t.toString().padStart(2,"0"),minutes:r.toString().padStart(2,"0"),seconds:n.toString().padStart(2,"0")}};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W,X=function(e,t){return e.hours===t.hours&&e.minutes===t.minutes&&e.seconds===t.seconds},q=s.createContext(null),J={timestampList:null,videoHasErrors:!1,videoId:null,player:null,isPlayerReady:!1,timestamperSettings:{timeOffset:5}};!function(e){e[e.SET_VIDEO_ID=0]="SET_VIDEO_ID",e[e.SET_VIDEO_HAS_ERRORS=1]="SET_VIDEO_HAS_ERRORS",e[e.ADD_TIMESTAMP=2]="ADD_TIMESTAMP",e[e.REMOVE_TIMESTAMP=3]="REMOVE_TIMESTAMP",e[e.CLEAR_TIMESTAMPS=4]="CLEAR_TIMESTAMPS",e[e.SET_TIMESTAMPER_SETTINGS=5]="SET_TIMESTAMPER_SETTINGS",e[e.UPDATE_TIMESTAMP_EVENT=6]="UPDATE_TIMESTAMP_EVENT",e[e.UPDATE_TIMESTAMP_TIME=7]="UPDATE_TIMESTAMP_TIME",e[e.SET_PLAYER=8]="SET_PLAYER",e[e.SET_PLAYER_READY=9]="SET_PLAYER_READY",e[e.SET_TIMESTAMP_LIST=10]="SET_TIMESTAMP_LIST"}(W||(W={}));var K=function(e,t){switch(t.type){case W.SET_VIDEO_ID:return F(F({},e),{},{videoId:t.payload,videoHasErrors:!1});case W.SET_VIDEO_HAS_ERRORS:return F(F({},e),{},{videoHasErrors:t.payload});case W.ADD_TIMESTAMP:var r={timestamp:B(e.player.getCurrentTime()-e.timestamperSettings.timeOffset),event:t.payload};return F(F({},e),{},{timestampList:[].concat((0,n.Z)(e.timestampList),[r])});case W.REMOVE_TIMESTAMP:var i=(0,n.Z)(e.timestampList);return i.splice(e.timestampList.indexOf(t.payload),1),F(F({},e),{},{timestampList:(0,n.Z)(i)});case W.CLEAR_TIMESTAMPS:return F(F({},e),{},{timestampList:[]});case W.SET_TIMESTAMPER_SETTINGS:return F(F({},e),{},{timestamperSettings:t.payload});case W.UPDATE_TIMESTAMP_EVENT:var s=t.payload,a=s.timestampEvent,o=s.newValue,c=e.timestampList.map((function(e){return e===a?F(F({},e),{},{event:o}):e}));return F(F({},e),{},{timestampList:c});case W.UPDATE_TIMESTAMP_TIME:var l=t.payload,p=l.timestampEvent,m=l.newTimestamp;m.actualSeconds=(d=m,60*parseInt(d.hours)*60+60*parseInt(d.minutes)+parseInt(d.seconds));var u=e.timestampList.map((function(e){return e===p?F(F({},e),{},{timestamp:m}):e}));return F(F({},e),{},{timestampList:u});case W.SET_PLAYER:return F(F({},e),{},{player:t.payload});case W.SET_PLAYER_READY:return F(F({},e),{},{isPlayerReady:t.payload});case W.SET_TIMESTAMP_LIST:return F(F({},e),{},{timestampList:t.payload});default:return e}var d},Q=function(){var e=(0,s.useReducer)(K,J),t=e[0],r=e[1];return(0,_.jsx)(q.Provider,{value:{state:t,dispatch:r},children:(0,_.jsx)(H,{})})}},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(82)}])},3527:function(e){e.exports={player:"timestamper_player__3LRFG",playerOverlay:"timestamper_playerOverlay__2cvs3",timestampEvent:"timestamper_timestampEvent__3iLvD",fade:"timestamper_fade__Ruj0O",timestamp:"timestamper_timestamp__1ZaFD"}}},function(e){e.O(0,[774,90,188,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);